"use strict";(self.webpackChunkpokemondb=self.webpackChunkpokemondb||[]).push([[378],{2378:(Ae,G,P)=>{P.r(G),P.d(G,{MainModule:()=>Se});var b=P(493),m=P(9653),X=P(6895),$=P(9814),Q=P(7061),c=P(4650);let Y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[X.ez,$.o9,Q.p]}),e})();var V=P(851),D=P(6580),I=P(7337);let q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-main"]],decls:2,vars:0,consts:[[1,"container-fluid","mb-5","mt-2"]],template:function(o,u){1&o&&(c.TgZ(0,"div",0),c._UZ(1,"router-outlet"),c.qZA())},dependencies:[I.lC]}),e})();const j="allPokemonShells";var C=(()=>{return(e=C||(C={})).Next="NEXT",e.Prev="PREV",C;var e})(),_=P(529),l=(()=>{return(e=l||(l={}))[e.EntitiesOnly=0]="EntitiesOnly",e[e.Both=1]="Both",e[e.None=2]="None",l;var e})();function h(e){return function(o,u){const f={ids:[...u.ids],entities:{...u.entities}},y=e(o,f);return y===l.Both?Object.assign({},u,f):y===l.EntitiesOnly?{...u,entities:f.entities}:u}}function E(e,s){const o=s(e);return(0,c.X6Q)()&&void 0===o&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",s.toString()),o}function J(e){function s(d,i){const n=E(d,e);return n in i.entities?l.None:(i.ids.push(n),i.entities[n]=d,l.Both)}function o(d,i){let n=!1;for(const t of d)n=s(t,i)!==l.None||n;return n?l.Both:l.None}function f(d,i){const n=E(d,e);return n in i.entities?(i.entities[n]=d,l.EntitiesOnly):(i.ids.push(n),i.entities[n]=d,l.Both)}function O(d,i){const t=(d instanceof Array?d:i.ids.filter(r=>d(i.entities[r]))).filter(r=>r in i.entities).map(r=>delete i.entities[r]).length>0;return t&&(i.ids=i.ids.filter(r=>r in i.entities)),t?l.Both:l.None}function k(d,i){return N([d],i)}function N(d,i){const n={};return(d=d.filter(r=>r.id in i.entities)).length>0?d.filter(a=>function A(d,i,n){const r=Object.assign({},n.entities[i.id],i.changes),a=E(r,e),p=a!==i.id;return p&&(d[i.id]=a,delete n.entities[i.id]),n.entities[a]=r,p}(n,a,i)).length>0?(i.ids=i.ids.map(a=>n[a]||a),l.Both):l.EntitiesOnly:l.None}function x(d,i){const n=[],t=[];for(const p of d){const M=E(p,e);M in i.entities?t.push({id:M,changes:p}):n.push(p)}const r=N(t,i),a=o(n,i);switch(!0){case a===l.None&&r===l.None:return l.None;case a===l.Both||r===l.Both:return l.Both;default:return l.EntitiesOnly}}return{removeAll:function S(d){return Object.assign({},d,{ids:[],entities:{}})},addOne:h(s),addMany:h(o),setAll:h(function u(d,i){return i.ids=[],i.entities={},o(d,i),l.Both}),setOne:h(f),setMany:h(function y(d,i){const n=d.map(t=>f(t,i));switch(!0){case n.some(t=>t===l.Both):return l.Both;case n.some(t=>t===l.EntitiesOnly):return l.EntitiesOnly;default:return l.None}}),updateOne:h(k),updateMany:h(N),upsertOne:h(function K(d,i){return x([d],i)}),upsertMany:h(x),removeOne:h(function g(d,i){return O([d],i)}),removeMany:h(O),map:h(function F(d,i){return N(i.ids.reduce((r,a)=>{const p=d(i.entities[a]);return p!==i.entities[a]&&r.push({id:a,changes:p}),r},[]).filter(({id:r})=>r in i.entities),i)}),mapOne:h(function Z({map:d,id:i},n){const t=n.entities[i];return t?k({id:i,changes:d(t)},n):l.None})}}function ie(e,s){const{removeOne:o,removeMany:u,removeAll:f}=J(e);function y(n,t){return g([n],t)}function g(n,t){const r=n.filter(a=>!(E(a,e)in t.entities));return 0===r.length?l.None:(i(r,t),l.Both)}function S(n,t){const r=E(n,e);return r in t.entities?(t.ids=t.ids.filter(a=>a!==r),i([n],t),l.Both):y(n,t)}function k(n,t){return F([n],t)}function F(n,t){const r=[],a=n.filter(p=>function N(n,t,r){if(!(t.id in r.entities))return!1;const p=Object.assign({},r.entities[t.id],t.changes),M=E(p,e);return delete r.entities[t.id],n.push(p),M!==t.id}(r,p,t)).length>0;if(0===r.length)return l.None;{const p=t.ids,M=[];return t.ids=t.ids.filter((v,L)=>v in t.entities||(M.push(L),!1)),i(r,t),!a&&M.every(v=>t.ids[v]===p[v])?l.EntitiesOnly:l.Both}}function d(n,t){const r=[],a=[];for(const v of n){const L=E(v,e);L in t.entities?a.push({id:L,changes:v}):r.push(v)}const p=F(a,t),M=g(r,t);switch(!0){case M===l.None&&p===l.None:return l.None;case M===l.Both||p===l.Both:return l.Both;default:return l.EntitiesOnly}}function i(n,t){n.sort(s);const r=[];let a=0,p=0;for(;a<n.length&&p<t.ids.length;){const M=n[a],v=E(M,e),L=t.ids[p];s(M,t.entities[L])<=0?(r.push(v),a++):(r.push(L),p++)}t.ids=r.concat(a<n.length?n.slice(a).map(e):t.ids.slice(p)),n.forEach((M,v)=>{t.entities[e(M)]=M})}return{removeOne:o,removeMany:u,removeAll:f,addOne:h(y),updateOne:h(k),upsertOne:h(function x(n,t){return d([n],t)}),setAll:h(function O(n,t){return t.entities={},t.ids=[],g(n,t),l.Both}),setOne:h(S),setMany:h(function A(n,t){const r=n.map(a=>S(a,t));switch(!0){case r.some(a=>a===l.Both):return l.Both;case r.some(a=>a===l.EntitiesOnly):return l.EntitiesOnly;default:return l.None}}),addMany:h(g),updateMany:h(F),upsertMany:h(d),map:h(function Z(n,t){return F(t.ids.reduce((a,p)=>{const M=n(t.entities[p]);return M!==t.entities[p]&&a.push({id:p,changes:M}),a},[]),t)}),mapOne:h(function K({map:n,id:t},r){const a=r.entities[t];return a?k({id:t,changes:n(a)},r):l.None})}}const w=(0,m.PH)("[Pokemon All/API] Get all pokemon start",(0,m.Ky)()),z=(0,m.PH)("[Pokemon All/API] Get all pokemon successful",(0,m.Ky)()),ae=(0,m.PH)("[Pokemon All/API] Get all pokemon failure",(0,m.Ky)()),T=function se(e={}){const{selectId:s,sortComparer:o}={selectId:e.selectId??(g=>g.id),sortComparer:e.sortComparer??!1},u=function ne(){return{getInitialState:function e(s={}){return Object.assign({ids:[],entities:{}},s)}}}(),f=function oe(){return{getSelectors:function e(s){const o=g=>g.ids,u=g=>g.entities,f=(0,m.P1)(o,u,(g,O)=>g.map(S=>O[S])),y=(0,m.P1)(o,g=>g.length);return s?{selectIds:(0,m.P1)(s,o),selectEntities:(0,m.P1)(s,u),selectAll:(0,m.P1)(s,f),selectTotal:(0,m.P1)(s,y)}:{selectIds:o,selectEntities:u,selectAll:f,selectTotal:y}}}}();return{selectId:s,sortComparer:o,...u,...f,...o?ie(s,o):J(s)}}({selectId:function de(e){return e.name}}),fe=T.getInitialState({apiWorking:!1,firstTimeLoading:!0,errMsg:void 0,error:!1,lastFetchedDate:void 0,pagination:{limit:20,firstOffset:0}}),H=(0,m.Lq)(fe,(0,m.on)(w,(e,{page:s})=>({...e,apiWorking:!0,pagination:{...e.pagination,pageRequested:s}})),(0,m.on)(z,(e,{payload:s,fetchedDate:o})=>{const u=s.results,f=((e,s)=>{const o=s.count,u=s.next,f=s.previous,y=Math.ceil(o/20);let g=e.nextOffset??0;u&&(g=+(new URL(u).searchParams.get("offset")??0));let O=e.prevOffset??0;return f&&(O=+(new URL(f).searchParams.get("offset")??0)),{pageRequested:e.pageRequested,limit:e.limit,nextOffset:g,prevOffset:O,firstOffset:0,lastOffset:20*y-20,pages:y,totalCount:o,nextPageUrl:u,previousPageUrl:f}})(e.pagination,s);return T.setAll(u,{...e,apiWorking:!1,firstTimeLoading:!1,error:!1,errMsg:void 0,pagination:f,lastFetchedDate:o})}),(0,m.on)(ae,(e,{errMsg:s})=>({...e,apiWorking:!1,errMsg:s,error:!0}))),B=(0,m.ZF)(j),pe=((0,m.P1)(B,T.getSelectors().selectIds),(0,m.P1)(B,T.getSelectors().selectEntities),(0,m.P1)(B,T.getSelectors().selectAll),(0,m.P1)(B,T.getSelectors().selectTotal),(0,m.P1)(B,e=>e.firstTimeLoading),(0,m.P1)(B,e=>e.pagination));var me=P(4691);let W=(()=>{class e{constructor(o,u){this.httpService=o,this.store=u,this.pagination$=this.store.select(pe)}getPokemonShells(o,u){let f=new _.LE,y="https://pokeapi.co/api/v2/pokemon";return u?y=u:(f=f.set("offset",20*(o??0)),f=f.set("limit",20)),this.httpService.get(y,f)}fetchPokemonShells(o,u){this.store.dispatch(w({page:o,scrollPosition:u}))}}return e.\u0275fac=function(o){return new(o||e)(c.LFG(me.O),c.LFG(m.yh))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=P(1576);let ge=(()=>{class e{constructor(){this.logoClass="",this.logoUrl="assets/img/poke-logo.png"}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["shared-poke-logo"]],inputs:{logoClass:"logoClass"},decls:2,vars:3,consts:[[3,"src"]],template:function(o,u){1&o&&(c.TgZ(0,"div"),c._UZ(1,"img",0),c.qZA()),2&o&&(c.Tol(u.logoClass),c.xp6(1),c.Q6J("src",u.logoUrl,c.LSH))},styles:["img[_ngcontent-%COMP%]{height:100%}.sm[_ngcontent-%COMP%]{height:2rem}.med[_ngcontent-%COMP%]{height:3rem}.lg[_ngcontent-%COMP%]{height:4rem}"]}),e})();const ye=[{path:"",component:q,children:[{path:"",redirectTo:"species",pathMatch:"full"},{path:"species",component:(()=>{class e{constructor(o){this.ps=o,this.title="All Pokemons",this.scrollPosition=C}ngOnInit(){this.ps.fetchPokemonShells(10)}navPage(o){this.ps.fetchPokemonShells(void 0,o)}}return e.\u0275fac=function(o){return new(o||e)(c.Y36(W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-main-all"]],decls:12,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","15px"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","5px"],[3,"logoClass"],[1,"p-title"],[3,"click"]],template:function(o,u){1&o&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"shared-poke-logo",2),c.TgZ(3,"div",3),c._uU(4),c.qZA()(),c.TgZ(5,"div"),c._uU(6," Table "),c.qZA(),c.TgZ(7,"div")(8,"button",4),c.NdJ("click",function(){return u.navPage(u.scrollPosition.Prev)}),c._uU(9,"Prev"),c.qZA(),c.TgZ(10,"button",4),c.NdJ("click",function(){return u.navPage(u.scrollPosition.Next)}),c._uU(11,"Next"),c.qZA()()()),2&o&&(c.xp6(2),c.Q6J("logoClass","sm"),c.xp6(2),c.hij(" ",u.title," "))},dependencies:[R.xw,R.SQ,R.Wh,ge],styles:[".p-title[_ngcontent-%COMP%]{font-family:quicksand;font-weight:500;font-size:1.5rem}"]}),e})(),data:{pageTitle:"Pokemon By Species"}}]}];let Me=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[I.Bz.forChild(ye),I.Bz]}),e})();var Pe=P(3900),Oe=P(4004);const ve=[(()=>{class e{constructor(o,u){this.actions$=o,this.ps=u,this.getPokemonShells$=(0,b.GW)(()=>this.actions$.pipe((0,b.l4)(w),(0,b.IC)(()=>this.ps.pagination$),(0,Pe.w)(f=>{let y=f[1];const g=f[0];let O;return g.scrollPosition&&(g.scrollPosition===C.Next?O=y.nextPageUrl:g.scrollPosition===C.Prev&&(O=y.previousPageUrl)),this.ps.getPokemonShells(g.page??0,O).pipe((0,Oe.U)(A=>(console.log(A),z({payload:A,fetchedDate:(new Date).getTime()}))))})))}}return e.\u0275fac=function(o){return new(o||e)(c.LFG(b.eX),c.LFG(W))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})()];let Se=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[m.Aw.forFeature(j,H),b.sQ.forFeature(ve),D.n,Y,V.d,Me]}),e})()}}]);